

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Scripts run by r2s_step1.py &mdash; UW-R2S - CNERG</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="UW-R2S - CNERG" href="index.html" />
    <link rel="next" title="r2s Package" href="r2s/r2s.html" />
    <link rel="prev" title="R2S-ACT FAQ" href="faq.html" /> 
  </head>
  <body> 
<div id="page-div" class="page">
<div id="header"><a id="uwhome" href="http://www.wisc.edu"><img src="http://cnergdata.engr.wisc.edu/_static/images/wordmark.gif" alt="University of Wisconsin–Madison" width="260" height="11" /></a> <a id="crest" href="http://www.wisc.edu"><img src="http://cnergdata.engr.wisc.edu/_static/images/crest.png" alt="" width="70" height="106" /></a>
    <h1 id="siteTitle"><a href="/"><span>UW-R2S</span></a></h1>
    <div id="tagline"><span>3-D Neutron Activation Workflow</span></div>
    <ul id="globalnav">
      <li id="uwsearch"><a href="http://www.wisc.edu/search/">UW Search</a></li>
      <li><a href="http://my.wisc.edu">My UW</a></li>
      <li><a href="http://map.wisc.edu">Map</a></li>
      <li id="last_tool"><a href="http://www.today.wisc.edu">Calendar</a></li>
    </ul>
    <form role="search" action="search.html" method="get" id="cse-search-box">
      <div>
      <label class="screen-reader-text" for="q">Search for:</label>
      <input type="text" id="q" name="q" value="Enter keywords here...." />
      <input type="submit" id="sa" value="Search" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
      </div>
    </form>
<script type="text/javascript">$('#searchbox').show(0);</script>
</div>

    <div id="nav" class="main-menu-container">
      <ul id="menu-main" class="sf-menu">
        <li class="menu-item"><a href="index.html">UW-R2S</a></li>
        <li class="menu-item" style="margin-right: 10px">
          <a href="faq.html" title="R2S-ACT FAQ"
             accesskey="P">previous</a>
          </li>
        <li class="menu-item" >
          <a href="r2s/r2s.html" title="r2s Package"
             accesskey="N">next</a>
          </li>
        <li class="menu-item" >
          <a href="np-modindex.html" title="Python Module Index"
             >modules</a>
          </li>
        <li class="menu-item" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a>
          </li>
        <li class="menu-item" >
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
          </li> 
      </ul>
    </div>
  <div id="c_container"> 
<div id="sidebar">
 <div id="sidebar_section"> <ul>
<li><a class="reference internal" href="#">Scripts run by r2s_step1.py</a><ul>
<li><a class="reference internal" href="#read-meshtal-py">read_meshtal.py:</a></li>
<li><a class="reference internal" href="#write-alara-fluxin-py">write_alara_fluxin.py</a></li>
<li><a class="reference internal" href="#mmgrid-py">mmgrid.py</a></li>
<li><a class="reference internal" href="#write-alara-geom-py">write_alara_geom.py</a></li>
</ul>
</li>
<li><a class="reference internal" href="#scripts-run-by-r2s-step2-py">Scripts run by r2s_step2.py</a><ul>
<li><a class="reference internal" href="#read-alara-phtn-py">read_alara_phtn.py</a></li>
<li><a class="reference internal" href="#write-gammas-py">write_gammas.py</a></li>
<li><a class="reference internal" href="#mcnp-n2p-py">mcnp_n2p.py</a></li>
</ul>
</li>
</ul>
 </div>
</div> 
    <div id="content" class="inline-block">
          <div class="post">
            
  <div class="section" id="scripts-run-by-r2s-step1-py">
<h1>Scripts run by r2s_step1.py<a class="headerlink" href="#scripts-run-by-r2s-step1-py" title="Permalink to this headline">¶</a></h1>
<p>This scripts are listed in chronological order of when they are run. Most of these scripts can be run with a -h flag for usage and command line options.</p>
<div class="section" id="read-meshtal-py">
<h2>read_meshtal.py:<a class="headerlink" href="#read-meshtal-py" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Purpose:</th><td class="field-body"><p class="first">This script reads in an MCNP meshtal file and creates a structured mesh tagged with the fluxes and errors for each energy group</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Inputs:</th><td class="field-body"><p class="first">MCNP meshtal file</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Outputs:</th><td class="field-body"><p class="first">Structure mesh tagged with fluxes and errors</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><cite>./read_meshtal.py &lt;meshtal file&gt; [options]</cite></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Options:</th><td class="field-body"><table class="first docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></td>
<td><p class="first last">show this help message and exit</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-o <var>MESH_OUTPUT</var></span></kbd></td>
<td><p class="first last">Name of mesh output file, default=flux_mesh.h5m</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-n <var>NORM</var></span></kbd></td>
<td><p class="first last">Normalization factor, default=1</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-m <var>MESH_FILE</var></span></kbd></td>
<td><p class="first last">Preexisting mesh on which to tag fluxes</p>
</td></tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Path:</th><td class="field-body"><p class="first last"><cite>r2s-act/scripts/r2s/io/read_meshtal.py</cite></p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="write-alara-fluxin-py">
<h2>write_alara_fluxin.py<a class="headerlink" href="#write-alara-fluxin-py" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Purpose:</th><td class="field-body"><p class="first">This script reads the neutron fluxes off a structured mesh file (created by <cite>read_meshtal.py</cite>) and prints an <cite>ALARA_fluxin</cite> file.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Inputs:</th><td class="field-body"><p class="first">Structured mesh</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Outputs:</th><td class="field-body"><p class="first">ALARA fluxin file</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><cite>./write_alara_fluxin.py &lt;structured mesh&gt; [options]</cite></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Options:</th><td class="field-body"><table class="first docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-b</span></kbd></td>
<td><p class="first last">Print to ALARA fluxin in fluxes in  decreasing energy.
Default=False</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-o <var>FLUXIN_NAME</var></span></kbd></td>
<td><p class="first last">Name of ALARA fluxin output file, default=ALARAflux.in</p>
</td></tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Path:</th><td class="field-body"><p class="first last"><cite>r2s-act/scripts/r2s/io/write_alara_fluxin.py</cite></p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="mmgrid-py">
<h2>mmgrid.py<a class="headerlink" href="#mmgrid-py" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Purpose:</th><td class="field-body"><p class="first">This script is used calculate average material definitions for each mesh voxel. Most geometries do not conform to the Cartesian mesh dictated by MCNP fmesh4 tallies. Voxels that contain multiple volumes are likely to contain multiple materials, so the ALARA materials assigned to these voxels must be a mixture of materials from the MCNP files. This script uses Monte Carlo ray-tracing to determine the volume fractions of each material in each voxel and then writes corresponding ALARA geometry and materials entries, and tags mesh with the material  definitions. The first required argument should be a DagMC-loadable geometry.  The optional second argument must be a file with a single structured mesh.  In the absence of the second argument, mmgrid will attempt to infer the shape of the DagMC geometry and create a structured grid to match it, with NDVIS divisions on each side.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Inputs:</th><td class="field-body"><p class="first">geometry file (.sat or .h5m), structured mesh file</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Outputs:</th><td class="field-body"><p class="first">ALARA geometery and materials entries</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><cite>mmgrid.py [options] geometry_file [structured_mesh_file]</cite></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Options:</th><td class="field-body"><table class="first docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></td>
<td><p class="first last">help message and exit</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-n <var>NUMRAYS</var></span></kbd></td>
<td><p class="first last">Set N. N^2 rays fired per row.  Default N=20</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-g</span>, <span class="option">--grid</span></kbd></td>
<td><p class="first last">Use grid of rays instead of randomly selected starting points</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-o <var>Output_file</var></span></kbd></td>
<td><p class="first last">Output file name, default=mmgrid_output.h5m</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-q</span>, <span class="option">--quiet</span></kbd></td>
<td><p class="first last">Suppress non-error output from mmgrid</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-d <var>NDIVS</var></span></kbd></td>
<td><p class="first last">Number of mesh divisions to use when inferring mesh size, default=10</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-a <var>GEOM_FILE</var></span></kbd></td>
<td><p class="first last">Write alara geom to specified file name</p>
</td></tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Path:</th><td class="field-body"><p class="first last"><cite>r2s-act/scripts/r2s/mmgrid.py</cite></p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="write-alara-geom-py">
<h2>write_alara_geom.py<a class="headerlink" href="#write-alara-geom-py" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Purpose:</th><td class="field-body">This script takes the structured mesh with materials from <cite>mmgrid.py</cite> and creates a file (alara_geom) with ALARA geometry and materials entries.</td>
</tr>
<tr class="field-even field"><th class="field-name">Inputs:</th><td class="field-body">Structured mesh tagged with materials entries</td>
</tr>
<tr class="field-odd field"><th class="field-name">Outputs:</th><td class="field-body">alara_geom, a file with ALARA geometry and materials</td>
</tr>
<tr class="field-even field"><th class="field-name">Syntax:</th><td class="field-body"><cite>./write_alara_geom.py</cite></td>
</tr>
<tr class="field-odd field"><th class="field-name">Options:</th><td class="field-body">None</td>
</tr>
<tr class="field-even field"><th class="field-name">Path:</th><td class="field-body"><cite>r2s-act/scripts/r2s/io/write_alara_geom.py</cite></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="scripts-run-by-r2s-step2-py">
<h1>Scripts run by r2s_step2.py<a class="headerlink" href="#scripts-run-by-r2s-step2-py" title="Permalink to this headline">¶</a></h1>
<div class="section" id="read-alara-phtn-py">
<h2>read_alara_phtn.py<a class="headerlink" href="#read-alara-phtn-py" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Purpose:</th><td class="field-body"><p class="first">The script reads an ALARA phtn_src file and writes the source strengths to the structured mesh specified by the -p option.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Inputs:</th><td class="field-body"><p class="first">ALARA pthn_src, structured mesh from Step 1</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Outputs:</th><td class="field-body"><p class="first">structured mesh tagged with source strengths</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><cite>./read_alara_phtn.py [options] arg</cite></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Options:</th><td class="field-body"><table class="first docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-p <var>PHTNSRCFILE</var></span></kbd></td>
<td><p class="first last">The photon source strengths are read from FILENAME.</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-m <var>MESHFILE</var></span></kbd></td>
<td><p class="first last">File to write source information to, or file name for saving a modified mesh.</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-i <var>ISOTOPE</var></span></kbd></td>
<td><p class="first last">The isotope string identifier or &#8216;TOTAL&#8217;. Default: TOTAL</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-c <var>COOLINGSTEP</var></span></kbd></td>
<td><p class="first last">The cooling step number or string identifier. (0 is first cooling step)  Default: 0</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-r</span>, <span class="option">--retag</span></kbd></td>
<td><p class="first last">Option enables retagging of .h5m meshes. Default: False</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-t</span>, <span class="option">--totals</span></kbd></td>
<td><p class="first last">Option enables adding the total photon source strength for all energy groups as a tag for each voxel. Default: False</p>
</td></tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Path:</th><td class="field-body"><p class="first last"><cite>r2s-act/scripts/r2s/io/read_alara_phtn.py</cite></p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="write-gammas-py">
<h2>write_gammas.py<a class="headerlink" href="#write-gammas-py" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Purpose:</th><td class="field-body"><p class="first">This script reads a structured mesh tagged with photon sources strengths and generates a gammas file for use as a source distribution file for photon transport.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Inputs:</th><td class="field-body"><p class="first">structured mesh file with photon source strengths</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Outputs:</th><td class="field-body"><p class="first">gammas file</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><cite>write_gammas.py input-h5m-file [options]</cite></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Options:</th><td class="field-body"><table class="first docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-h</span></kbd></td>
<td><p class="first last">Show message and exit</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-o <var>OUTPUT</var></span></kbd></td>
<td><p class="first last">Option specifies the name of the &#8216;gammas&#8217;file. Default: gammas</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-a</span></kbd></td>
<td><p class="first last">Generate the gammas file with an alias table of energy bins for each voxel. Default: False. Default file name changes to &#8216;gammas_alias.&#8217; Creates the file gammas with the photon energy bins for each voxel stored as alias tables. Reads directly from phtn_src file. Each voxel&#8217;s line corresponds with an alias table of the form: [total source strength, p1, g1a, g1b, p2, g2a, g2b ... pN, gNa, gNb] Where each p#, g#a, g#b are the info for one bin in the alias table.</p>
</td></tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Path:</th><td class="field-body"><p class="first last"><cite>r2s-act/scripts/r2s/io/write_gammas.py</cite></p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="mcnp-n2p-py">
<h2>mcnp_n2p.py<a class="headerlink" href="#mcnp-n2p-py" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Purpose:</th><td class="field-body"><p class="first">This script reads an MCNP neutron input file and writes a corresponding photon input file.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Inputs:</th><td class="field-body"><p class="first">MNCP neutron input file</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Outputs:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">Syntax:</th><td class="field-body"><p class="first"><cite>mcnp_n2p.py INPUTFILE [options]</cite></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Options:</th><td class="field-body"><table class="first docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-h</span></kbd></td>
<td><p class="first last">Show help message and exit</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-o <var>OUTPUT</var></span></kbd></td>
<td><p class="first last">File name to write modified MCNP input to. Default is to append input file name with &#8216;_p&#8217;.</p>
</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-d</span></kbd></td>
<td><p class="first last">Add flag to parse file like a DAG-MCNP5 file (which has only title card and block 3 cards). Default: False</p>
</td></tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Path:</th><td class="field-body"><p class="first last"><cite>/r2s-act/scripts/r2s/mcnp_n2p.py</cite></p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>


          </div>
      </div>

    </div>
</div>
    <div id="footer">
      <p>
        &copy; Copyright 2013, CNERG.
      </p>
      <p>
      Last updated on Jun 26, 2013.
      </p>
      <p>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
      </p>
    </div>
  </body>
</html>