

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>io Package &mdash; UW-R2S - CNERG</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="UW-R2S - CNERG" href="../index.html" />
    <link rel="up" title="r2s Package" href="r2s.html" />
    <link rel="next" title="mcnp Package" href="r2s.mcnp.html" />
    <link rel="prev" title="r2s Package" href="r2s.html" /> 
  </head>
  <body> 
<div id="page-div" class="page">
<div id="header"><a id="uwhome" href="http://www.wisc.edu"><img src="http://cnergdata.engr.wisc.edu/_static/images/wordmark.gif" alt="University of Wisconsin–Madison" width="260" height="11" /></a> <a id="crest" href="http://www.wisc.edu"><img src="http://cnergdata.engr.wisc.edu/_static/images/crest.png" alt="" width="70" height="106" /></a>
    <h1 id="siteTitle"><a href="/"><span>UW-R2S</span></a></h1>
    <div id="tagline"><span>3-D Neutron Activation Workflow</span></div>
    <ul id="globalnav">
      <li id="uwsearch"><a href="http://www.wisc.edu/search/">UW Search</a></li>
      <li><a href="http://my.wisc.edu">My UW</a></li>
      <li><a href="http://map.wisc.edu">Map</a></li>
      <li id="last_tool"><a href="http://www.today.wisc.edu">Calendar</a></li>
    </ul>
    <form role="search" action="../search.html" method="get" id="cse-search-box">
      <div>
      <label class="screen-reader-text" for="q">Search for:</label>
      <input type="text" id="q" name="q" value="Enter keywords here...." />
      <input type="submit" id="sa" value="Search" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
      </div>
    </form>
<script type="text/javascript">$('#searchbox').show(0);</script>
</div>

    <div id="nav" class="main-menu-container">
      <ul id="menu-main" class="sf-menu">
        <li class="menu-item"><a href="../index.html">UW-R2S</a></li>
        <li class="menu-item" style="margin-right: 10px">
          <a href="r2s.html" title="r2s Package"
             accesskey="P">previous</a>
          </li>
        <li class="menu-item" >
          <a href="r2s.mcnp.html" title="mcnp Package"
             accesskey="N">next</a>
          </li>
        <li class="menu-item" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a>
          </li>
        <li class="menu-item" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a>
          </li>
        <li class="menu-item" >
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a>
          </li>
          <li class="menu-item"><a href="modules.html" >r2s</a></li>
          <li class="menu-item"><a href="r2s.html" accesskey="U">r2s Package</a></li> 
      </ul>
    </div>
  <div id="c_container"> 
<div id="sidebar">
 <div id="sidebar_section"> <ul>
<li><a class="reference internal" href="#">io Package</a><ul>
<li><a class="reference internal" href="#module-r2s.io.read_alara_phtn"><tt class="docutils literal"><span class="pre">read_alara_phtn</span></tt> Module</a></li>
<li><a class="reference internal" href="#module-r2s.io.read_meshtal"><tt class="docutils literal"><span class="pre">read_meshtal</span></tt> Module</a></li>
<li><a class="reference internal" href="#module-r2s.io.write_alara_fluxin"><tt class="docutils literal"><span class="pre">write_alara_fluxin</span></tt> Module</a></li>
<li><a class="reference internal" href="#module-r2s.io.write_alara_geom"><tt class="docutils literal"><span class="pre">write_alara_geom</span></tt> Module</a></li>
<li><a class="reference internal" href="#module-r2s.io.write_gammas"><tt class="docutils literal"><span class="pre">write_gammas</span></tt> Module</a></li>
</ul>
</li>
</ul>
 </div>
</div> 
    <div id="content" class="inline-block">
          <div class="post">
            
  <div class="section" id="io-package">
<h1>io Package<a class="headerlink" href="#io-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-r2s.io.read_alara_phtn">
<span id="read-alara-phtn-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">read_alara_phtn</span></tt> Module<a class="headerlink" href="#module-r2s.io.read_alara_phtn" title="Permalink to this headline">¶</a></h2>
<p>Module includes methods which find the lines in a &#8216;phtn_src&#8217; file from ALARA
that match a specified isotope and cooling time, and tags the photon source
information to a mesh.</p>
<dl class="function">
<dt id="r2s.io.read_alara_phtn.get_cooling_step_name">
<tt class="descclassname">r2s.io.read_alara_phtn.</tt><tt class="descname">get_cooling_step_name</tt><big>(</big><em>coolingstep</em>, <em>fr</em><big>)</big><a class="headerlink" href="#r2s.io.read_alara_phtn.get_cooling_step_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Method determines the user-specified cooling step name in a phtn_src file</p>
<p>If coolingstep is a number, we search for the corresponding line in
the file stream &#8216;fr&#8217;, and determine the corresponding cooling step string.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>coolingstep</strong> : int or string</p>
<blockquote>
<div><p>number for cooling step index or string for cooling step name</p>
</div></blockquote>
<p><strong>fr</strong> : readable file stream</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns :</th><td class="field-body"><p class="first"><strong>...</strong> : tuple</p>
<blockquote class="last">
<div><p>A 2 value tuple: (the cooling step string name, the number of
photon energy bins used in the phtn_src file)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>If <strong>coolingstep</strong> is not an integer, the calling function must catch a
ValueError.</p>
</dd></dl>

<dl class="function">
<dt id="r2s.io.read_alara_phtn.main">
<tt class="descclassname">r2s.io.read_alara_phtn.</tt><tt class="descname">main</tt><big>(</big><big>)</big><a class="headerlink" href="#r2s.io.read_alara_phtn.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Method defines an option parser and handles command-line
usage of this module.</p>
<p class="rubric">Notes</p>
<p>Requires command line arguments to be passed - otherwise prints help
information.</p>
</dd></dl>

<dl class="function">
<dt id="r2s.io.read_alara_phtn.read_to_h5m">
<tt class="descclassname">r2s.io.read_alara_phtn.</tt><tt class="descname">read_to_h5m</tt><big>(</big><em>inputfile</em>, <em>meshobj</em>, <em>isotope='TOTAL'</em>, <em>coolingstep=0</em>, <em>retag=False</em>, <em>totals=False</em><big>)</big><a class="headerlink" href="#r2s.io.read_alara_phtn.read_to_h5m" title="Permalink to this definition">¶</a></dt>
<dd><p>Read in a phtn_src file and tag the contents to a mesh.</p>
<p>Method reads in a phtn_src file line by line, looking for
a specific isotope at a specific cooling step, and repeats for each voxel.
Method tags the mesh with the photon source information,
and then saves the mesh.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>inputfile</strong> : string</p>
<blockquote>
<div><p>Path to an ALARA-style &#8216;phtn_src&#8217; file</p>
</div></blockquote>
<p><strong>meshobj</strong> : ScdMesh object</p>
<blockquote>
<div><p>Structured mesh object to tag,</p>
</div></blockquote>
<p><strong>isotope</strong> : string</p>
<blockquote>
<div><p>Isotope to read data for from &#8216;phtn_src&#8217; file</p>
</div></blockquote>
<p><strong>coolingstep</strong> : int or string</p>
<blockquote>
<div><p>String cooling step name, or number for index (0&#8217;th is &#8216;shutdown&#8217;)</p>
</div></blockquote>
<p><strong>retag</strong> : boolean</p>
<blockquote>
<div><p>Whether to retag existing tags in mesh</p>
</div></blockquote>
<p><strong>totals</strong> : boolean</p>
<blockquote class="last">
<div><p>Whether to tag the total photon source strength for each voxel</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="r2s.io.read_alara_phtn.tag_phtn_src_totals">
<tt class="descclassname">r2s.io.read_alara_phtn.</tt><tt class="descname">tag_phtn_src_totals</tt><big>(</big><em>mesh</em>, <em>voxels</em>, <em>numergbins=-1</em>, <em>retag=False</em><big>)</big><a class="headerlink" href="#r2s.io.read_alara_phtn.tag_phtn_src_totals" title="Permalink to this definition">¶</a></dt>
<dd><p>Method tags the total photon source strength for each voxel.</p>
<p>Method calculate the total photon source strength, and 
if retagging is enabled or the tag does not exist, tags the mesh.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>mesh</strong> : iMesh.Mesh object</p>
<blockquote>
<div><p>Mesh from which to get/create/delete tags</p>
</div></blockquote>
<p><strong>voxels</strong> : list of iMesh.Entity handles</p>
<blockquote>
<div><p>List of voxel entity handles (iBase.Type.Region)</p>
</div></blockquote>
<p><strong>numergbins</strong> : int (optional)</p>
<blockquote>
<div><p>Number of energy group tags to read</p>
</div></blockquote>
<p><strong>retag</strong> : boolean</p>
<blockquote class="last">
<div><p>Whether to overwrite existing &#8216;phtn_src_total&#8217; tag. (Default: False)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-r2s.io.read_meshtal">
<span id="read-meshtal-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">read_meshtal</span></tt> Module<a class="headerlink" href="#module-r2s.io.read_meshtal" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="r2s.io.read_meshtal.find_first_line">
<tt class="descclassname">r2s.io.read_meshtal.</tt><tt class="descname">find_first_line</tt><big>(</big><em>meshtal</em>, <em>tally_line</em><big>)</big><a class="headerlink" href="#r2s.io.read_meshtal.find_first_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Searchs for the &#8220;Energy X Y Z&#8221; line, to determine the first line of data</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>meshtal</strong> : string</p>
<blockquote>
<div><p>File path to meshtal file.</p>
</div></blockquote>
<p><strong>tally_line</strong> : int</p>
<blockquote>
<div><p>Line number in file where tally begins</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns :</th><td class="field-body"><p class="first"><strong>m</strong> : int</p>
<blockquote class="last">
<div><p>Line number of first data line for the tally in <cite>meshtal</cite></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="r2s.io.read_meshtal.find_mesh_bounds">
<tt class="descclassname">r2s.io.read_meshtal.</tt><tt class="descname">find_mesh_bounds</tt><big>(</big><em>meshtal</em>, <em>tally_line</em><big>)</big><a class="headerlink" href="#r2s.io.read_meshtal.find_mesh_bounds" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the header of the meshtal to get the x, y, z, and energy boundaries</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>meshtal</strong> : string</p>
<blockquote>
<div><p>File path to meshtal file.</p>
</div></blockquote>
<p><strong>tally_line</strong> : int</p>
<blockquote>
<div><p>Line number in file where tally begins</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns :</th><td class="field-body"><p class="first"><strong>...</strong> : tuple of 4 ints</p>
<blockquote class="last">
<div><p>Tuple of the divisions in x, y, z and energy</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="r2s.io.read_meshtal.find_meshtal_type">
<tt class="descclassname">r2s.io.read_meshtal.</tt><tt class="descname">find_meshtal_type</tt><big>(</big><em>meshtal</em>, <em>tally_line</em><big>)</big><a class="headerlink" href="#r2s.io.read_meshtal.find_meshtal_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Searchs the meshtal header to determine if it is a neutron or photon 
meshtally</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>meshtal</strong> : string</p>
<blockquote>
<div><p>File path to meshtal file.</p>
</div></blockquote>
<p><strong>tally_line</strong> : int</p>
<blockquote>
<div><p>Line number in file where tally begins</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns :</th><td class="field-body"><p class="first"><strong>meshtal_type</strong> : {&#8216;n&#8217;, &#8216;p&#8217;}</p>
<blockquote class="last">
<div><p>Tally type; either neutron (&#8216;n&#8217;) or photon (&#8216;p) is supported.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="r2s.io.read_meshtal.find_tallies">
<tt class="descclassname">r2s.io.read_meshtal.</tt><tt class="descname">find_tallies</tt><big>(</big><em>meshtal</em><big>)</big><a class="headerlink" href="#r2s.io.read_meshtal.find_tallies" title="Permalink to this definition">¶</a></dt>
<dd><p>Searches the meshtal file to determine the number of tallies present and
returns the tallies and lines where they are listed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>meshtal</strong> : string</p>
<blockquote>
<div><p>File path to meshtal file.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns :</th><td class="field-body"><p class="first"><strong>tally_numbers</strong> : list of strings</p>
<blockquote>
<div><p>List of tally numbers (as strings)</p>
</div></blockquote>
<p><strong>tally_lines</strong> : list of integers</p>
<blockquote class="last">
<div><p>List of the line numbers where tallies begin</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="r2s.io.read_meshtal.main">
<tt class="descclassname">r2s.io.read_meshtal.</tt><tt class="descname">main</tt><big>(</big><em>arguments=None</em><big>)</big><a class="headerlink" href="#r2s.io.read_meshtal.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="r2s.io.read_meshtal.read_meshtal">
<tt class="descclassname">r2s.io.read_meshtal.</tt><tt class="descname">read_meshtal</tt><big>(</big><em>filename</em>, <em>tally_line</em>, <em>norm=1.0</em>, <em>**kw</em><big>)</big><a class="headerlink" href="#r2s.io.read_meshtal.read_meshtal" title="Permalink to this definition">¶</a></dt>
<dd><p>Read an MCNP meshtal file and return a tagged structured mesh for it</p>
<p>The optional normalization factor will be multiplied into each flux value.
This can be used to rescale a tally if a tally multiplier was not used
in the original MCNP problem.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>filename</strong> : string</p>
<blockquote>
<div><p>File path to meshtal file.</p>
</div></blockquote>
<p><strong>tally_line</strong> : int</p>
<blockquote>
<div><p>Line number in file where tally begins</p>
</div></blockquote>
<p><strong>norm</strong> : float, optional</p>
<blockquote>
<div><p>Normalization factor to multiply into each flux value.</p>
</div></blockquote>
<p><strong>Keyword arguments:</strong> :</p>
<blockquote>
<div><dl class="docutils">
<dt>smesh: An existing scdmesh on which to tag the fluxes.  </dt>
<dd><p class="first last">A ScdMeshError is raised if this mesh has incompatible ijk dims</p>
</dd>
</dl>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns :</th><td class="field-body"><p class="first"><strong>sm</strong> : ScdMesh object</p>
<blockquote class="last">
<div><p>Opened structured mesh from filename, with meshtally data tagged</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="r2s.io.read_meshtal.tag_fluxes">
<tt class="descclassname">r2s.io.read_meshtal.</tt><tt class="descname">tag_fluxes</tt><big>(</big><em>meshtal</em>, <em>meshtal_type</em>, <em>m</em>, <em>spatial_points</em>, <em>e_bins</em>, <em>sm</em>, <em>norm</em><big>)</big><a class="headerlink" href="#r2s.io.read_meshtal.tag_fluxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Tags the fluxes from a meshtally to a structured mesh.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>meshtal</strong> : string</p>
<blockquote>
<div><p>File path to meshtal file.</p>
</div></blockquote>
<p><strong>meshtal_type</strong> : {&#8216;n&#8217;, &#8216;p&#8217;}</p>
<blockquote>
<div><p>Tally type; either neutron (&#8216;n&#8217;) or photon (&#8216;p) is supported.</p>
</div></blockquote>
<p><strong>m</strong> : int</p>
<blockquote>
<div><p>Line number of first data line for the tally in <cite>meshtal</cite></p>
</div></blockquote>
<p><strong>spatial_points</strong> : int</p>
<blockquote>
<div><p>Number of meshtally points (aka voxels)</p>
</div></blockquote>
<p><strong>e_bins</strong> : int</p>
<blockquote>
<div><p>Number of energy bins in the meshtally</p>
</div></blockquote>
<p><strong>sm</strong> : scdmesh.ScdMesh</p>
<blockquote>
<div><p>Structured mesh to tag fluxes to</p>
</div></blockquote>
<p><strong>norm</strong> : float, optional</p>
<blockquote>
<div><p>Normalization factor to multiply into each flux value.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns :</th><td class="field-body"><p class="first last"><strong>N/A</strong> :</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-r2s.io.write_alara_fluxin">
<span id="write-alara-fluxin-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">write_alara_fluxin</span></tt> Module<a class="headerlink" href="#module-r2s.io.write_alara_fluxin" title="Permalink to this headline">¶</a></h2>
<p><cite>write_alara_fluxin.py</cite> is used to create a fluxin file for ALARA. Fluxes are
taken from a MOAB mesh, with tag names of the form &#8216;n_group_###&#8217; where ### is
a 3 digit number with leading zeros as needed (e.g. 001).</p>
<dl class="function">
<dt id="r2s.io.write_alara_fluxin.find_num_e_groups">
<tt class="descclassname">r2s.io.write_alara_fluxin.</tt><tt class="descname">find_num_e_groups</tt><big>(</big><em>sm</em><big>)</big><a class="headerlink" href="#r2s.io.write_alara_fluxin.find_num_e_groups" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of energy groups used for neutron flux tags on a mesh</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>sm - Scdmesh.scmesh object</strong> :</p>
<blockquote>
<div><p>Structured mesh object containing tags of the form &#8216;n_group_###&#8217;.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns :</th><td class="field-body"><p class="first"><strong>num_e_groups - int</strong> :</p>
<blockquote class="last">
<div><p>Number of energy groups</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="r2s.io.write_alara_fluxin.get_flux_tag_handles">
<tt class="descclassname">r2s.io.write_alara_fluxin.</tt><tt class="descname">get_flux_tag_handles</tt><big>(</big><em>mesh</em><big>)</big><a class="headerlink" href="#r2s.io.write_alara_fluxin.get_flux_tag_handles" title="Permalink to this definition">¶</a></dt>
<dd><p>Method identifies all tags containing flux information from a DAGMC 
meshtally</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>mesh</strong> : iMesh.Mesh object</p>
<blockquote>
<div><p>MOAB mesh file object containing tags of the form &#8220;TALLY_TAG_lowE-highE&#8221;</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns :</th><td class="field-body"><p class="first"><strong>fluxtaghandles</strong> : list of iMesh.Tag objects</p>
<blockquote class="last">
<div><p>List of tag handles, sorted by tag name, from lowest energy to high</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="r2s.io.write_alara_fluxin.main">
<tt class="descclassname">r2s.io.write_alara_fluxin.</tt><tt class="descname">main</tt><big>(</big><big>)</big><a class="headerlink" href="#r2s.io.write_alara_fluxin.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="r2s.io.write_alara_fluxin.print_fluxes">
<tt class="descclassname">r2s.io.write_alara_fluxin.</tt><tt class="descname">print_fluxes</tt><big>(</big><em>mesh</em>, <em>num_e_groups</em>, <em>backward_bool</em>, <em>fluxin_name</em>, <em>tags=None</em><big>)</big><a class="headerlink" href="#r2s.io.write_alara_fluxin.print_fluxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Method writes tag values to ALARA fluxin format for the flux at each
energy for each voxel</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>mesh</strong> : iMesh.Mesh object</p>
<blockquote>
<div><p>MOAB mesh file object containing tags of the form TALLY_TAG_lowE-highE</p>
</div></blockquote>
<p><strong>num_e_groups</strong> : integer</p>
<blockquote>
<div><p>Number of energy groups in tally</p>
</div></blockquote>
<p><strong>backward_bool</strong> : boolean</p>
<blockquote>
<div><p>If true, output data is in order from high energy to low energy.
Note that this should be true when working with the FENDL libraries.</p>
</div></blockquote>
<p><strong>fluxin_name</strong> : string</p>
<blockquote>
<div><p>Filename for output ALARA fluxin file</p>
</div></blockquote>
<p><strong>tags</strong> : list of iMesh.Tag objects</p>
<blockquote class="last">
<div><p>List of tag handles, sorted by tag name, from lowest energy to high</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="r2s.io.write_alara_fluxin.write_alara_fluxin">
<tt class="descclassname">r2s.io.write_alara_fluxin.</tt><tt class="descname">write_alara_fluxin</tt><big>(</big><em>filename</em>, <em>mesh</em>, <em>backwards=False</em><big>)</big><a class="headerlink" href="#r2s.io.write_alara_fluxin.write_alara_fluxin" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a MOAB mesh and create an alara_fluxin file from tags</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>filename - string</strong> :</p>
<blockquote>
<div><p>Output filename for the fluxin file.</p>
</div></blockquote>
<p><strong>mesh - ScdMesh or iMesh.Mesh object</strong> :</p>
<blockquote>
<div><p>MOAB mesh with tags to create fluxin file from.</p>
</div></blockquote>
<p><strong>backwards - boolean</strong> :</p>
<blockquote class="last">
<div><p>If true, prints fluxes from high energy to low energy. 
Note that this should be true when working with the FENDL libraries.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-r2s.io.write_alara_geom">
<span id="write-alara-geom-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">write_alara_geom</span></tt> Module<a class="headerlink" href="#module-r2s.io.write_alara_geom" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="r2s.io.write_alara_geom.create_mixture_definitions">
<tt class="descclassname">r2s.io.write_alara_geom.</tt><tt class="descname">create_mixture_definitions</tt><big>(</big><em>mesh</em><big>)</big><a class="headerlink" href="#r2s.io.write_alara_geom.create_mixture_definitions" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of unique materials tagged onto the mesh.</p>
<p>unique_mixtures is a dictionary mapping mixture tuples (created through
_create_mixture_tuple) to lists.  The first element in the list is a
unique integer ID for the mixtures; the rest of the elements
are the hex handles that participate in that mixture.</p>
<p>mat_tags is a list of the material tags from the input mesh.  This list
is ordered in the same order as the mixture tuples.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>mesh</strong> : ScdMesh object or iMesh.Mesh object</p>
<blockquote>
<div><p>Mesh object to read materials data from</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns :</th><td class="field-body"><p class="first"><strong>...</strong> : tuple</p>
<blockquote class="last">
<div><p>A tuple of the list of mixtures and tag handles list;
i.e. (unique_mixtures, mat_tags)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>It is assumed that the mesh has the &#8216;matVOID&#8217; tag.</p>
</dd></dl>

<dl class="function">
<dt id="r2s.io.write_alara_geom.main">
<tt class="descclassname">r2s.io.write_alara_geom.</tt><tt class="descname">main</tt><big>(</big><big>)</big><a class="headerlink" href="#r2s.io.write_alara_geom.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="r2s.io.write_alara_geom.write_alara_geom">
<tt class="descclassname">r2s.io.write_alara_geom.</tt><tt class="descname">write_alara_geom</tt><big>(</big><em>filename</em>, <em>mesh</em>, <em>namedict={}</em><big>)</big><a class="headerlink" href="#r2s.io.write_alara_geom.write_alara_geom" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a mesh with mmgrid tags, write an ALARA geometry file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>filename</strong> : string</p>
<blockquote>
<div><p>Path/filename of mesh file to write ALARA geometry to</p>
</div></blockquote>
<p><strong>mesh</strong> : ScdMesh object or iMesh.Mesh object</p>
<blockquote>
<div><p>Mesh object containing materials tags</p>
</div></blockquote>
<p><strong>namedict</strong> : dictionary (optional)</p>
<blockquote class="last">
<div><p>Dictionary of names for material compositions</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="r2s.io.write_alara_geom.write_mat_loading">
<tt class="descclassname">r2s.io.write_alara_geom.</tt><tt class="descname">write_mat_loading</tt><big>(</big><em>mesh</em>, <em>mat_tags</em>, <em>mixtures</em>, <em>output_file</em><big>)</big><a class="headerlink" href="#r2s.io.write_alara_geom.write_mat_loading" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the mat_loading information to the ALARA geometry output</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>mesh</strong> : ScdMesh object or iMesh.Mesh object</p>
<blockquote>
<div><p>Mesh object to read materials data from</p>
</div></blockquote>
<p><strong>mat_tags</strong> : ...</p>
<blockquote>
<div><p>...</p>
</div></blockquote>
<p><strong>mixtures</strong> : ...</p>
<blockquote>
<div><p>...</p>
</div></blockquote>
<p><strong>output_file</strong> : file object</p>
<blockquote class="last">
<div><p>Opened file for writing contents of ALARA geometry</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="r2s.io.write_alara_geom.write_mixtures">
<tt class="descclassname">r2s.io.write_alara_geom.</tt><tt class="descname">write_mixtures</tt><big>(</big><em>mixtures</em>, <em>mat_tags</em>, <em>name_dict</em>, <em>output_file</em><big>)</big><a class="headerlink" href="#r2s.io.write_alara_geom.write_mixtures" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the mixture lines to the ALARA geometry output</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>mixtures</strong> : ???</p>
<blockquote>
<div><p>...</p>
</div></blockquote>
<p><strong>mat_tags</strong> : list of iMesh.Tag entities</p>
<blockquote>
<div><p>...</p>
</div></blockquote>
<p><strong>name_dict</strong> : dictionary (optional?)</p>
<blockquote>
<div><p>Dictionary of names for material compositions</p>
</div></blockquote>
<p><strong>output_file</strong> : file object</p>
<blockquote class="last">
<div><p>Opened file for writing contents of ALARA geometry</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="r2s.io.write_alara_geom.write_zones">
<tt class="descclassname">r2s.io.write_alara_geom.</tt><tt class="descname">write_zones</tt><big>(</big><em>mesh</em>, <em>output_file</em><big>)</big><a class="headerlink" href="#r2s.io.write_alara_geom.write_zones" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the volume and zone lines to the ALARA geometry output</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>mesh</strong> : ScdMesh object or iMesh.Mesh object</p>
<blockquote>
<div><p>Mesh object to read materials data from</p>
</div></blockquote>
<p><strong>output_file</strong> : file object</p>
<blockquote class="last">
<div><p>Opened file for writing contents of ALARA geometry</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-r2s.io.write_gammas">
<span id="write-gammas-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">write_gammas</span></tt> Module<a class="headerlink" href="#module-r2s.io.write_gammas" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="r2s.io.write_gammas.calc_sm_volumes_list">
<tt class="descclassname">r2s.io.write_gammas.</tt><tt class="descname">calc_sm_volumes_list</tt><big>(</big><em>sm</em><big>)</big><a class="headerlink" href="#r2s.io.write_gammas.calc_sm_volumes_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a 1D list of the voxel volumes for a XYZ structured mesh</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>sm</strong> : ScdMesh object</p>
<blockquote>
<div><p>A structured mesh object from which to calculate volumes.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns :</th><td class="field-body"><p class="first"><strong>vols</strong> : list of floats</p>
<blockquote class="last">
<div><p>A 1D list of voxel volumes in order &#8216;xyz&#8217;</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<dl class="docutils">
<dt>Voxel ordering follows meshtal file convention which is::</dt>
<dd>-for x for y iterate z
-for x iterate y
-iterate x</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="r2s.io.write_gammas.calc_total_source_strength">
<tt class="descclassname">r2s.io.write_gammas.</tt><tt class="descname">calc_total_source_strength</tt><big>(</big><em>mesh</em>, <em>voxels</em>, <em>tag_srcsum=False</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#r2s.io.write_gammas.calc_total_source_strength" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="r2s.io.write_gammas.gen_gammas_file_from_h5m">
<tt class="descclassname">r2s.io.write_gammas.</tt><tt class="descname">gen_gammas_file_from_h5m</tt><big>(</big><em>sm</em>, <em>outfile='gammas'</em>, <em>sampling='v'</em>, <em>do_bias=False</em>, <em>cumulative=False</em>, <em>cust_ergbins=False</em>, <em>resample=False</em>, <em>uni_resamp_all=False</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#r2s.io.write_gammas.gen_gammas_file_from_h5m" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate gammas file using information from tags on a MOAB Scd mesh.</p>
<p>Method reads tags with photon source strengths from a structured mesh object
and generates the gammas file for the modified source.F90 routine
<cite>source_gamma.F90</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>sm</strong> : ScdMesh</p>
<blockquote>
<div><p>Structured mesh object to generate &#8216;gammas&#8217; from.</p>
</div></blockquote>
<p><strong>outfile</strong> : string, optional</p>
<blockquote>
<div><p>Output file name for the &#8216;gammas&#8217; file</p>
</div></blockquote>
<p><strong>sampling</strong> : {&#8216;v&#8217;, &#8216;u&#8217;}, optional</p>
<blockquote>
<div><p>Format the file file for voxel sampling (&#8216;v&#8217;) or uniform sampling (&#8216;u&#8217;)</p>
</div></blockquote>
<p><strong>do_bias</strong> : boolean, optional</p>
<blockquote>
<div><p>Attempt to tag bias values for voxels</p>
</div></blockquote>
<p><strong>cumulative</strong> : boolean, optional</p>
<blockquote>
<div><p>Use the cumulative format for listing energy PDFs of each voxel</p>
</div></blockquote>
<p><strong>cust_ergbins</strong> : boolean, optional</p>
<blockquote>
<div><p>Attempt to use custom energy bins found on &#8216;sm&#8217;</p>
</div></blockquote>
<p><strong>resample</strong> : boolean, optional</p>
<blockquote>
<div><p>If true, &#8216;r&#8217; flag is added to gammas, and resampling of particles 
starting in void regions of voxels is enabled.</p>
</div></blockquote>
<p><strong>uni_resamp_all</strong> : boolean, optional</p>
<blockquote>
<div><p>If true, &#8216;a&#8217; flag is added to gammas, and particles starting in void
regions of voxels, during uniform sampling, are resampled over the
entire problem, rather than resampling just the voxel.  This has the
potential to result in an unfair game.</p>
</div></blockquote>
<p><strong>keyword arguments</strong> :</p>
<blockquote class="last">
<div><p>Currently valid: {&#8216;title&#8217;, &#8216;isotope&#8217;, &#8216;coolingstep&#8217;} 
These are passed to header creation code.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Requires that the structured mesh has photon source strength tags of the
form &#8216;phtn_src_group_###&#8217;.</p>
<p>Will read photon energy bin boundary values if the root set has the tag 
&#8216;PHTN_ERG&#8217; (a list of floats).</p>
</dd></dl>

<dl class="function">
<dt id="r2s.io.write_gammas.main">
<tt class="descclassname">r2s.io.write_gammas.</tt><tt class="descname">main</tt><big>(</big><big>)</big><a class="headerlink" href="#r2s.io.write_gammas.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Method defines an option parser and handles command-line
usage of this module.</p>
<p class="rubric">Notes</p>
<p>Requires command line arguments to be passed - otherwise prints help
information.</p>
</dd></dl>

</div>
</div>


          </div>
      </div>

    </div>
</div>
    <div id="footer">
      <p>
        &copy; Copyright 2013, CNERG.
      </p>
      <p>
      Last updated on Jun 26, 2013.
      </p>
      <p>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
      </p>
    </div>
  </body>
</html>